Fixed an edge case where viewed events will be emitted prematurely because we're using the incorrect provider to check for hasLoaded flag