internal refactor: remove getDerivedStateFromProps in favor of memoization